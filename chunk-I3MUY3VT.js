import{a as S,b as s}from"./chunk-VHTWP45A.js";import{b as h}from"./chunk-VBONCSWP.js";import{a as y}from"./chunk-EHKFXQ57.js";import{Ha as e,Ia as p,K as u,La as a,Ma as C,Za as _,_a as P,ea as i,ka as x,ta as b,ua as g,va as f,wa as o,xa as n,ya as t,za as r}from"./chunk-C4FFNW2K.js";var w=()=>["fas","rocket"],I=()=>["fas","plug"],T=()=>["fas","info-circle"],z=()=>["fas","lightbulb"],N=()=>["fab","rust"],O=()=>["fab","golang"],M=()=>["fab","python"],E=()=>["fab","node-js"],v=()=>["fab","microsoft"],R=()=>["fas","chart-bar"],F=()=>["fas","chevron-right"],j=()=>["fas","code"],D=l=>["fab",l],B=()=>["fas","check"],G=(l,d)=>d.name;function L(l,d){if(l&1&&(n(0,"li"),r(1,"fa-icon",49),e(2),t()),l&2){let c=d.$implicit;i(),o("icon",a(2,B)),i(),p(c)}}function A(l,d){if(l&1&&(n(0,"div",12)(1,"div",45),r(2,"fa-icon",46),n(3,"h3"),e(4),t()(),n(5,"p",47),e(6),t(),n(7,"code",48),e(8),t(),n(9,"ul",20),g(10,L,3,3,"li",null,b),t()()),l&2){let c=d.$implicit;i(2),o("icon",C(4,D,c.icon)),i(2),p(c.name),i(2),p(c.description),i(2),p(c.install),i(2),f(c.features)}}var k=class l{seo=u(y);buildCode=s.ffiBuild;goCode=s.ffiGo;nodejsCode=s.ffiNodejs;pythonCode=s.ffiPython;csharpCode=s.ffiCsharp;scopesCode=s.ffiScopes;languages=[{name:"Go",icon:"golang",description:"High-performance Go bindings via cgo",install:"go get github.com/pegasusheavy/dependency-injector/ffi/go/di",features:["Struct serialization","Error handling with sentinel errors","Finalizer-based cleanup"]},{name:"Node.js",icon:"node-js",description:"TypeScript bindings via koffi (no native compilation)",install:"pnpm add @pegasusheavy/dependency-injector",features:["Full TypeScript support","Generic type inference","SWC-powered builds"]},{name:"Python",icon:"python",description:"Zero-dependency bindings via ctypes",install:"pip install dependency-injector-rust",features:["Context manager support","Type hints","No compilation required"]},{name:"C#",icon:"microsoft",description:".NET 8.0+ bindings via P/Invoke",install:"dotnet add package PegasusHeavy.DependencyInjector",features:["Record type support","IDisposable pattern","Generic resolution"]}];ngOnInit(){this.seo.updateSeo({title:"FFI Bindings - Go, Node.js, Python, C# | Dependency Injector",description:"Use the Rust dependency-injector from Go, Node.js/TypeScript, Python, and C#. Cross-language FFI bindings with ~300ns resolution.",keywords:["ffi","go bindings","nodejs bindings","python bindings","csharp bindings","cross-language"],canonical:"https://pegasusheavy.github.io/dependency-injector/docs/ffi"})}static \u0275fac=function(c){return new(c||l)};static \u0275cmp=x({type:l,selectors:[["app-ffi"]],decls:287,vars:40,consts:[[1,"docs-page"],[1,"docs-container"],[1,"breadcrumb"],["routerLink","/"],[1,"mr-1",3,"icon"],[1,"separator"],["routerLink","/docs"],[1,"current"],[1,"docs-header"],[1,"mr-3","text-rust-500",3,"icon"],[1,"lead"],[1,"language-grid"],[1,"language-card"],[1,"docs-content"],["id","building"],["filename","terminal",3,"code"],[1,"info-callout"],[1,"callout-icon",3,"icon"],["id","go"],["filename","main.go",3,"code"],[1,"feature-list"],["id","nodejs"],["href","https://koffi.dev/","target","_blank","rel","noopener"],["filename","index.ts",3,"code"],["id","python"],["filename","main.py",3,"code"],["id","csharp"],["filename","Program.cs",3,"code"],["id","scopes"],["filename","scopes.go",3,"code"],[1,"callout-icon","text-yellow-400",3,"icon"],["id","performance"],[1,"perf-table"],[1,"mr-2",3,"icon"],[1,"perf-value"],[1,"text-slate-400","text-sm","mt-4"],["routerLink","/benchmarks"],["id","memory"],[1,"memory-patterns"],[1,"pattern-card"],["id","next-steps"],[1,"next-steps"],["routerLink","/benchmarks",1,"next-step-card"],[1,"ml-2",3,"icon"],["routerLink","/docs/examples",1,"next-step-card"],[1,"language-header"],[1,"language-icon",3,"icon"],[1,"language-desc"],[1,"install-cmd"],[1,"text-green-400","mr-2",3,"icon"]],template:function(c,m){c&1&&(n(0,"div",0)(1,"div",1)(2,"nav",2)(3,"ol")(4,"li")(5,"a",3),r(6,"fa-icon",4),e(7,"Home"),t()(),n(8,"li")(9,"span",5),e(10,"/"),t()(),n(11,"li")(12,"a",6),e(13,"Docs"),t()(),n(14,"li")(15,"span",5),e(16,"/"),t()(),n(17,"li",7),e(18,"FFI Bindings"),t()()(),n(19,"header",8)(20,"h1"),r(21,"fa-icon",9),e(22,"FFI Bindings"),t(),n(23,"p",10),e(24,"Use dependency-injector from Go, Node.js, Python, and C# via native FFI bindings."),t()(),n(25,"div",11),g(26,A,12,6,"div",12,G),t(),n(28,"div",13)(29,"h2",14),e(30,"Building the Shared Library"),t(),n(31,"p"),e(32,"Before using FFI bindings, build the native library with the "),n(33,"code"),e(34,"ffi"),t(),e(35," feature:"),t(),r(36,"app-code-block",15),n(37,"div",16),r(38,"fa-icon",17),n(39,"div")(40,"strong"),e(41,"Library Path"),t(),n(42,"p"),e(43,"Set "),n(44,"code"),e(45,"LD_LIBRARY_PATH"),t(),e(46," (Linux), "),n(47,"code"),e(48,"DYLD_LIBRARY_PATH"),t(),e(49," (macOS), or add to "),n(50,"code"),e(51,"PATH"),t(),e(52," (Windows) before running your application."),t()()(),n(53,"h2",18),e(54,"Go"),t(),n(55,"p"),e(56,"The Go bindings use cgo to call the native library directly. Services are serialized as JSON."),t(),r(57,"app-code-block",19),n(58,"h3"),e(59,"Key Features"),t(),n(60,"ul",20)(61,"li")(62,"code"),e(63,"RegisterValue()"),t(),e(64," - Auto-serializes Go structs to JSON"),t(),n(65,"li")(66,"code"),e(67,"ResolveJSON()"),t(),e(68," - Deserializes into a struct pointer"),t(),n(69,"li")(70,"code"),e(71,"TryResolve()"),t(),e(72," - Returns nil if not found (no error)"),t(),n(73,"li")(74,"code"),e(75,"Scope()"),t(),e(76," - Creates hierarchical child containers"),t(),n(77,"li"),e(78,"Sentinel errors: "),n(79,"code"),e(80,"di.ErrNotFound"),t(),e(81,", "),n(82,"code"),e(83,"di.ErrAlreadyRegistered"),t()()(),n(84,"h2",21),e(85,"Node.js / TypeScript"),t(),n(86,"p"),e(87,"TypeScript bindings use "),n(88,"a",22),e(89,"koffi"),t(),e(90," - no native compilation required."),t(),r(91,"app-code-block",23),n(92,"h3"),e(93,"Key Features"),t(),n(94,"ul",20)(95,"li"),e(96,"Full TypeScript generics support"),t(),n(97,"li")(98,"code"),e(99,"tryResolve()"),t(),e(100," - Returns null for missing services"),t(),n(101,"li")(102,"code"),e(103,"DIError"),t(),e(104," with error codes for structured error handling"),t(),n(105,"li"),e(106,"SWC-powered builds for fast compilation"),t(),n(107,"li"),e(108,"Requires pnpm as package manager"),t()(),n(109,"h2",24),e(110,"Python"),t(),n(111,"p"),e(112,"Python bindings use built-in "),n(113,"code"),e(114,"ctypes"),t(),e(115," - zero dependencies required."),t(),r(116,"app-code-block",25),n(117,"h3"),e(118,"Key Features"),t(),n(119,"ul",20)(120,"li"),e(121,"Context manager support ("),n(122,"code"),e(123,"with Container() as c:"),t(),e(124,")"),t(),n(125,"li")(126,"code"),e(127,"try_resolve()"),t(),e(128," - Returns None for missing services"),t(),n(129,"li"),e(130,"Full type hints for IDE support"),t(),n(131,"li")(132,"code"),e(133,"DIError"),t(),e(134," exception with error codes"),t(),n(135,"li"),e(136,"Works with Python 3.10+"),t()(),n(137,"h2",26),e(138,"C# / .NET"),t(),n(139,"p"),e(140,"C# bindings use P/Invoke for native interop. Requires .NET 8.0 or later."),t(),r(141,"app-code-block",27),n(142,"h3"),e(143,"Key Features"),t(),n(144,"ul",20)(145,"li")(146,"code"),e(147,"IDisposable"),t(),e(148," pattern for resource management"),t(),n(149,"li"),e(150,"Generic "),n(151,"code"),e(152,"Resolve<T>()"),t(),e(153," and "),n(154,"code"),e(155,"TryResolve<T>()"),t()(),n(156,"li"),e(157,"Record type support with System.Text.Json"),t(),n(158,"li")(159,"code"),e(160,"DIException"),t(),e(161," with "),n(162,"code"),e(163,"DiErrorCode"),t(),e(164," enum"),t(),n(165,"li"),e(166,"Auto-type inference with "),n(167,"code"),e(168,"Register<T>(instance)"),t()()(),n(169,"h2",28),e(170,"Scoped Containers"),t(),n(171,"p"),e(172,"All FFI bindings support hierarchical scoped containers:"),t(),r(173,"app-code-block",29),n(174,"div",16),r(175,"fa-icon",30),n(176,"div")(177,"strong"),e(178,"Scoping Pattern"),t(),n(179,"p"),e(180,"Use scopes for request-level isolation in web servers. Child scopes inherit parent services but can override them. Parent containers never see child-scoped services."),t()()(),n(181,"h2",31),e(182,"Performance"),t(),n(183,"p"),e(184,"FFI overhead varies by language due to serialization and call overhead:"),t(),n(185,"div",32)(186,"table")(187,"thead")(188,"tr")(189,"th"),e(190,"Language"),t(),n(191,"th"),e(192,"Singleton Resolution"),t(),n(193,"th"),e(194,"Notes"),t()()(),n(195,"tbody")(196,"tr")(197,"td"),r(198,"fa-icon",33),e(199,"Rust (native)"),t(),n(200,"td",34),e(201,"~9 ns"),t(),n(202,"td"),e(203,"Hot cache path"),t()(),n(204,"tr")(205,"td"),r(206,"fa-icon",33),e(207,"Go"),t(),n(208,"td",34),e(209,"~300 ns"),t(),n(210,"td"),e(211,"cgo + JSON unmarshal"),t()(),n(212,"tr")(213,"td"),r(214,"fa-icon",33),e(215,"Python"),t(),n(216,"td",34),e(217,"~95 ns"),t(),n(218,"td"),e(219,"ctypes + JSON decode"),t()(),n(220,"tr")(221,"td"),r(222,"fa-icon",33),e(223,"Node.js"),t(),n(224,"td",34),e(225,"~1,800 ns"),t(),n(226,"td"),e(227,"koffi + JSON parse"),t()(),n(228,"tr")(229,"td"),r(230,"fa-icon",33),e(231,"C#"),t(),n(232,"td",34),e(233,"~200 ns"),t(),n(234,"td"),e(235,"P/Invoke + System.Text.Json"),t()()()()(),n(236,"p",35),e(237," * All measurements on 13th Gen Intel Core i9-13900K. See "),n(238,"a",36),e(239,"Benchmarks"),t(),e(240," for detailed comparisons. "),t(),n(241,"h2",37),e(242,"Memory Management"),t(),n(243,"p"),e(244,"All FFI bindings require explicit cleanup:"),t(),n(245,"div",38)(246,"div",39)(247,"h4"),r(248,"fa-icon",33),e(249,"Go"),t(),n(250,"code"),e(251,"defer container.Free()"),t()(),n(252,"div",39)(253,"h4"),r(254,"fa-icon",33),e(255,"Node.js"),t(),n(256,"code"),e(257,"try { ... } finally { container.free() }"),t()(),n(258,"div",39)(259,"h4"),r(260,"fa-icon",33),e(261,"Python"),t(),n(262,"code"),e(263,"with Container() as c: ..."),t()(),n(264,"div",39)(265,"h4"),r(266,"fa-icon",33),e(267,"C#"),t(),n(268,"code"),e(269,"using var container = new Container();"),t()()(),n(270,"h2",40),e(271,"Next Steps"),t(),n(272,"div",41)(273,"a",42)(274,"h4"),r(275,"fa-icon",33),e(276,"Benchmarks "),r(277,"fa-icon",43),t(),n(278,"p"),e(279,"See detailed performance comparisons across all languages."),t()(),n(280,"a",44)(281,"h4"),r(282,"fa-icon",33),e(283,"Examples "),r(284,"fa-icon",43),t(),n(285,"p"),e(286,"Real-world usage patterns and integrations."),t()()()()()()),c&2&&(i(6),o("icon",a(23,w)),i(15),o("icon",a(24,I)),i(5),f(m.languages),i(10),o("code",m.buildCode),i(2),o("icon",a(25,T)),i(19),o("code",m.goCode),i(34),o("code",m.nodejsCode),i(25),o("code",m.pythonCode),i(25),o("code",m.csharpCode),i(32),o("code",m.scopesCode),i(2),o("icon",a(26,z)),i(23),o("icon",a(27,N)),i(8),o("icon",a(28,O)),i(8),o("icon",a(29,M)),i(8),o("icon",a(30,E)),i(8),o("icon",a(31,v)),i(18),o("icon",a(32,O)),i(6),o("icon",a(33,E)),i(6),o("icon",a(34,M)),i(6),o("icon",a(35,v)),i(9),o("icon",a(36,R)),i(2),o("icon",a(37,F)),i(5),o("icon",a(38,j)),i(2),o("icon",a(39,F)))},dependencies:[h,P,_,S],styles:[".docs-page[_ngcontent-%COMP%]{min-height:100vh;padding:2rem 1rem}@media(min-width:768px){.docs-page[_ngcontent-%COMP%]{padding:3rem 2rem}}.docs-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto}.breadcrumb[_ngcontent-%COMP%]{margin-bottom:2rem}.breadcrumb[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;list-style:none;padding:0;margin:0;font-size:.875rem}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#94a3b8;text-decoration:none;transition:color .2s}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#e9721c}.breadcrumb[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{color:#475569}.breadcrumb[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{color:#f1f5f9}.docs-header[_ngcontent-%COMP%]{margin-bottom:3rem}.docs-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#f1f5f9;margin-bottom:1rem;display:flex;align-items:center}.docs-header[_ngcontent-%COMP%]   .lead[_ngcontent-%COMP%]{font-size:1.25rem;color:#94a3b8;line-height:1.6}.language-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem;margin-bottom:3rem}.language-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e293bcc,#0f172ae6);border:1px solid #334155;border-radius:12px;padding:1.5rem;transition:all .3s ease}.language-card[_ngcontent-%COMP%]:hover{border-color:#e9721c;transform:translateY(-2px);box-shadow:0 8px 30px #e9721c26}.language-card[_ngcontent-%COMP%]   .language-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:.75rem}.language-card[_ngcontent-%COMP%]   .language-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#f1f5f9;margin:0}.language-card[_ngcontent-%COMP%]   .language-icon[_ngcontent-%COMP%]{font-size:1.75rem;color:#e9721c}.language-card[_ngcontent-%COMP%]   .language-desc[_ngcontent-%COMP%]{color:#94a3b8;font-size:.875rem;margin-bottom:1rem}.language-card[_ngcontent-%COMP%]   .install-cmd[_ngcontent-%COMP%]{display:block;background:#0f172a;padding:.5rem .75rem;border-radius:6px;font-family:JetBrains Mono,monospace;font-size:.75rem;color:#10b981;margin-bottom:1rem;overflow-x:auto;white-space:nowrap}.language-card[_ngcontent-%COMP%]   .feature-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.language-card[_ngcontent-%COMP%]   .feature-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;color:#cbd5e1;font-size:.8125rem;margin-bottom:.375rem}.language-card[_ngcontent-%COMP%]   .feature-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.docs-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:600;color:#f1f5f9;margin-top:3rem;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:1px solid #334155}.docs-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:first-child{margin-top:0}.docs-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#e2e8f0;margin-top:2rem;margin-bottom:.75rem}.docs-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#94a3b8;line-height:1.7;margin-bottom:1rem}.docs-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#e9721c;text-decoration:none}.docs-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.docs-content[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:#e9721c1a;color:#e9721c;padding:.125rem .375rem;border-radius:4px;font-family:JetBrains Mono,monospace;font-size:.875em}.docs-content[_ngcontent-%COMP%]   .feature-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:1rem 0}.docs-content[_ngcontent-%COMP%]   .feature-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:flex-start;color:#cbd5e1;margin-bottom:.5rem;line-height:1.5}.docs-content[_ngcontent-%COMP%]   .feature-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{white-space:nowrap}.info-callout[_ngcontent-%COMP%]{display:flex;gap:1rem;background:#3b82f61a;border:1px solid rgba(59,130,246,.3);border-radius:8px;padding:1rem 1.25rem;margin:1.5rem 0}.info-callout[_ngcontent-%COMP%]   .callout-icon[_ngcontent-%COMP%]{color:#3b82f6;font-size:1.25rem;flex-shrink:0;margin-top:.125rem}.info-callout[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#f1f5f9;display:block;margin-bottom:.25rem}.info-callout[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#94a3b8;margin:0;font-size:.9375rem}.perf-table[_ngcontent-%COMP%]{overflow-x:auto;margin:1.5rem 0}.perf-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#1e293b80;border-radius:8px;overflow:hidden}.perf-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#0f172acc}.perf-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.875rem 1rem;text-align:left;font-weight:600;color:#e2e8f0;font-size:.875rem;border-bottom:1px solid #334155}.perf-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #1e293b}.perf-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.perf-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#e9721c0d}.perf-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem 1rem;color:#94a3b8;font-size:.875rem}.perf-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.perf-value[_ngcontent-%COMP%]{font-family:JetBrains Mono,monospace;color:#10b981;font-weight:500}.memory-patterns[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;margin:1.5rem 0}.memory-patterns[_ngcontent-%COMP%]   .pattern-card[_ngcontent-%COMP%]{background:#1e293b80;border:1px solid #334155;border-radius:8px;padding:1rem}.memory-patterns[_ngcontent-%COMP%]   .pattern-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#f1f5f9;font-size:.9375rem;font-weight:600;margin-bottom:.5rem}.memory-patterns[_ngcontent-%COMP%]   .pattern-card[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{display:block;background:#0f172a;padding:.5rem .75rem;border-radius:4px;font-size:.75rem;color:#10b981;white-space:nowrap;overflow-x:auto}.next-steps[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1rem;margin-top:2rem}.next-step-card[_ngcontent-%COMP%]{display:block;background:linear-gradient(135deg,#1e293bcc,#0f172ae6);border:1px solid #334155;border-radius:8px;padding:1.25rem;text-decoration:none;transition:all .3s ease}.next-step-card[_ngcontent-%COMP%]:hover{border-color:#e9721c;transform:translateY(-2px);box-shadow:0 4px 20px #e9721c26}.next-step-card[_ngcontent-%COMP%]:hover   h4[_ngcontent-%COMP%]{color:#e9721c}.next-step-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#f1f5f9;font-size:1.125rem;font-weight:600;margin-bottom:.5rem;display:flex;align-items:center;transition:color .2s}.next-step-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#94a3b8;font-size:.875rem;margin:0;line-height:1.5}"]})};export{k as FfiPage};
